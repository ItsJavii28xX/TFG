<app-header></app-header>

<div class="layout">
  <div class="sidebar-container">
    <app-sidebar [status]="collapsed ? 'closed' : 'open'"></app-sidebar>
    <button class="toggle-btn" mat-mini-fab (click)="toggleSidebar()">
      <mat-icon>{{ collapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
    </button>
  </div>

  <section class="main-content">
    <app-content></app-content>

    <!-- FAB para desplegar panel de opciones -->
    <button mat-fab class="fab" (click)="toggleOptions()">
      <mat-icon>group_add</mat-icon>
    </button>

    <!-- Panel de opciones: aÃ±ade, borra, actualiza -->
    <app-group-options
      [open]="optionsOpen"
      (close)="optionsOpen = false"
      (add)="openAddForm()"
      (delete)="openDeleteForm()"
      (update)="openUpdateForm()">
    </app-group-options>

    <!-- Modal overlay para el formulario Crear Grupo -->
    <div *ngIf="showAddForm" class="overlay" (click)="onAddCancel()">
      <div class="form-wrapper" (click)="$event.stopPropagation()">
        <app-group-form
          (cancel)="onAddCancel()"
          (created)="onGroupCreated()">
        </app-group-form>
      </div>
    </div>
  </section>
</div>

<app-footer></app-footer>
