<!-- src/app/components/members-select/members-select.component.html -->
<mat-card class="members-card">
  <h3>Selecciona miembros</h3>

  <mat-list>
    <mat-list-item *ngFor="let c of contacts"
                   (click)="toggle(c)"
                   [class.selected]="selected.includes(c)">
      <img matListAvatar [src]="c.imagen_perfil" alt="">
      <h4 matLine>{{ c.nombre }} {{ c.apellidos }}</h4>
      <mat-icon matListIcon *ngIf="selected.includes(c)">check</mat-icon>
    </mat-list-item>
  </mat-list>

  <!-- formGroup wrapper que incluye email + checkbox -->
  <div [formGroup]="form" class="manual-section">
    <div class="manual-email">
      <mat-form-field appearance="outline" class="email-field">
        <mat-label>Correo manual</mat-label>
        <input matInput formControlName="manualEmail"
               placeholder="usuario@ejemplo.com">
        <mat-error *ngIf="form.get('manualEmail')?.hasError('email')">
          Email inválido
        </mat-error>
      </mat-form-field>
      <button mat-stroked-button
              type="button"
              [disabled]="form.invalid"
              (click)="addManual()">
        Añadir
      </button>
    </div>

    <!-- Checkbox dentro del mismo formGroup y justo debajo -->
    <mat-checkbox formControlName="isAdmin" class="admin-checkbox">
      Admin?
    </mat-checkbox>
  </div>

  <div class="actions">
    <button mat-button type="button" (click)="close()">Cancelar</button>
    <button mat-raised-button
            color="primary"
            type="button"
            [disabled]="!selected.length"
            (click)="finish()">
      Listo
    </button>
  </div>
</mat-card>
